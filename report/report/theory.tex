\subsection{The particle filter}
\subsubsection{Introduction}
The core of our tracking engine is a technique known as the \emph{particle filter}. The particle filter is a kind of Bayesian filtering where one uses discrete hypotheses to approximate continuous probability distributions. The main idea can be outlined as follows. We have a system with a state we cannot directly measure. We have an observation of the current system state, and a number of probable hypotheses of the previous state. From these hypotheses, we create new hypotheses for the current state, then assign weights to each hypothesis depending on how probable the observation is. If the observation is probable when the system is in the hypothesised state, then that hypothesis gets a high weight. Finally, we select the most probable hypotheses and let them represent our estimation of the system state. If we have a good model of the system, this method can give a good estimate of the system state.



\subsubsection{Formal description of the particle filter}
Suppose we have a system described by the state $x_t$ at time $t$. $x_t$ can be thought of as a vector of state parameters. We know the previous state $x_{t-1}$ and have an observation $z_t$ of the system at the current time. Our observation $z_t$ suffers from interference, so we cannot directly read the current state $x_t$ from this observation. However, we can estimate $x_t$ if we know the following things about the system:

\begin{itemize}
\item A probability function $p_t$, where $p\left(x_t | x_{t-1}\right)$ is the probability that the current state is $x_t$ if the previous state was $x_{t-1}$.
\item A probability function $q_t$, where $q\left(z_t | x_t\right)$ is the probability that we observe $z_t$ if the current state is $x_t$.
\end{itemize}

We draw a set $\left\{x_t^m\right\}_{m=1}^{N}$ of samples from $p_t$. These samples roughly represent a probability distribution for the current state $x_t$, but we have yet to consider our observation. Therefore, we draw new samples from our first set of samples, this time weighted by how probable $z_t$ is 

\subsection{Kinematic whisker models}
What are our kinematic models?
