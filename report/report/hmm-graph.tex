% A simple graph with straight and bend arrows and loops
% Stefan Kottwitz
\documentclass{article}
\usepackage{tikz}
%%%<
\usepackage{verbatim}
\usepackage[active,tightpage]{preview}
\PreviewEnvironment{tikzpicture}
\setlength\PreviewBorder{5pt}%
%%%>
\begin{comment}
:Title: Simple graph
:Tags: Arrows;Diagrams;Graphs;Mathematics
:Author: Stefan Kottwitz
:Slug: graph

A simple example of a graph with straight and bend arrows and loops.
It has been posted as answer to the question
http://tex.stackexchange.com/q/45734/213 of Ichibann.

* Define styles for edges, arrows, and nodes
* Place the main nodes
* Draw edges with nodes for description
* Use options `loop` and `bend` for loops and bent edges
* Specify `left` and `right` for bend direction and node placement
\end{comment}
\usetikzlibrary{arrows}
\begin{document}
\begin{tikzpicture}[->,>=stealth',shorten >=1pt,auto,node distance=3cm,
  thick,main node/.style={circle,draw,font=\sffamily\Large\bfseries}]

  \node[main node] (z1) [label=above:$p(z_1)$] {$Z_1$};
  \node[main node] (z2) [right of=z1,label=above:$p(z_2|z_1)$] {$Z_2$};
  \node[main node] (z3) [right of=z2,label=above:$p(z_3|z_2)$] {$Z_3$};
  \node (dots) [right of=z3] {$\ldots$};
  \node[main node] (zn) [right of=dots,label=above:$p(z_n|z_{n-1})$] {$Z_n$};

  \node[main node] (u1) [below of=z1,label=below:$p(u_1|z_1)$] {$u_1$};
  \node[main node] (u2) [below of=z2,label=below:$p(u_2|z_2)$] {$u_2$};
  \node[main node] (u3) [below of=z3,label=below:$p(u_3|z_3)$] {$u_3$};
  \node[main node] (un) [below of=zn,label=below:$p(u_n|z_n)$] {$u_n$};

  \path[every node/.style={font=\sffamily\small}]
    (z1) edge node [right] {} (z2)
    (z2) edge node [right] {} (z3)
    (z3) edge node [right] {} (dots)
    (dots) edge node [right] {} (zn);

  \path[every node/.style={font=\sffamily\small}]
    (z1) edge node [below] {} (u1)
    (z2) edge node [below] {} (u2)
    (z3) edge node [below] {} (u3)
    (zn) edge node [below] {} (un);

\end{tikzpicture}
\end{document}
